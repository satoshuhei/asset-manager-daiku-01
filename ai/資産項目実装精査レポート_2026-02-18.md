# 資産項目 実装精査レポート（2026-02-18）

対象範囲:
- 定義: 画面項目定義（SCR-010/011）
- 実装: Model / Web画面 / API / Service / Test

## 1. 総評
- 定義は概ね整備済み（資産一覧・資産詳細/編集・属性20・状態遷移）。
- 登録/変更のバックエンド（API + Service）は主要項目を実装済み。
- 表示機能（Web画面）は、一覧・詳細ともに設計項目に対して不足が残る。

## 2. 観点別評価

### 2.1 定義（設計）
判定: 実装済み（定義あり）

- 資産一覧の検索条件 `AS-S-001〜006` が定義済み。
- 資産一覧表示列 `AS-L-001〜007` が定義済み。
- 資産詳細/編集 `AS-D-001〜006` が定義済み。
- 属性20 `AS-A-001〜020` が定義済み。
- 一覧画面の状態遷移操作 `AS-T-001/002` が定義済み。

根拠:
- docs/06_詳細設計_画面項目定義.md

### 2.2 表示機能（Web）
判定: 部分実装

実装済み:
- 資産一覧で表示: 資産コード、資産名、状態、予算紐付け。
- 資産一覧で状態遷移候補の表示と実行フォーム。
- 資産詳細で表示: ID、資産コード、資産名、種別、状態、予算紐付け。

不足:
- 資産一覧表示列 `AS-L-003`（分類）、`AS-L-006`（利用者）、`AS-L-007`（期限日）が未表示。
- 資産一覧検索条件 `AS-S-002〜006` のWeb UIが未実装（現状は資産コードのみ）。
- 資産詳細で属性20（`AS-A-001〜020`）表示なし。

根拠:
- templates/account_requests/asset_list.html
- templates/account_requests/asset_detail.html
- apps/account_requests/web_views.py

### 2.3 登録機能
判定: APIは実装済み / Webは部分実装

実装済み（API/Service）:
- 資産登録APIで基本情報、属性20、1:n属性を受付。
- Serviceで属性20保存、1:n保存、PC時の利用者必須チェックを実施。

部分実装（Web）:
- 資産登録専用Webフォームは未実装。
- CSVインポートによる登録は実装済み。

根拠:
- apps/account_requests/serializers.py
- apps/account_requests/views.py
- apps/account_requests/services/asset_service.py

### 2.4 変更機能
判定: APIは実装済み / Webは部分実装

実装済み（API/Service）:
- 資産更新APIで基本情報、属性20、1:n属性の更新に対応。
- 状態変更は `workflow_service` 経由で実施（直接更新なし）。
- 大分類別の状態マスタ/遷移マスタに基づく状態遷移判定を実装。

実装済み（Web）:
- 資産一覧から状態遷移実行が可能（遷移候補はマスタから生成）。

不足（Web）:
- 資産詳細/編集画面で属性20・基本項目編集フォームが未実装。

根拠:
- apps/account_requests/views.py
- apps/account_requests/services/asset_service.py
- apps/account_requests/services/workflow_service.py
- apps/account_requests/web_views.py
- templates/account_requests/asset_list.html

## 3. テスト観点
- 資産更新API（属性20/1:n更新）: テストあり。
- 資産一覧状態遷移（正常/異常）: テストあり。
- PC利用者必須の登録/更新チェック: テストあり。

根拠:
- apps/account_requests/tests.py

## 4. 結論（実装状況サマリ）
- 定義: 〇
- 表示機能: △（一覧/詳細の項目不足）
- 登録機能: △（API〇 / Web登録UI不足）
- 変更機能: △（API〇 / Web編集UI不足、ただし一覧で状態遷移は〇）

## 5. 優先改善提案（最小）
1. 資産一覧に未表示列（分類/利用者/期限日）を追加。
2. 資産一覧の検索UIを `AS-S-002〜006` まで拡張。
3. 資産詳細に属性20表示（必要なら編集）を追加。
4. 資産登録/編集のWebフォームをAPI仕様に合わせて実装。
