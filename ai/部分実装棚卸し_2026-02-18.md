# 部分実装棚卸し（2026-02-18）

対象:
- 要件/設計: `docs/02_要件定義書.md`, `docs/04_画面遷移図.md`, `docs/06_詳細設計_画面項目定義.md`, `docs/07_詳細設計_API設計.md`
- 実装: `apps/account_requests/models.py`, `apps/account_requests/views.py`, `apps/account_requests/web_views.py`, `templates/account_requests/*.html`

## 1. 部分実装の機能

### 1-1. 資産編集（API）
- 現状: `PUT /api/v1/assets/{asset_id}` は実装済み
- 部分実装点:
  - 更新処理が View 直更新で Service 経由になっていない
  - 属性20（`AssetAttributeValue`）更新が未対応
  - 1:n属性（`AssetAttributeMultiValue`）更新が未対応

### 1-2. 予算管理（画面）
- 現状: 予算登録・執行済登録の基本機能は実装済み
- 部分実装点:
  - 予算分類3階層（大/中/小）入力が未対応
  - 予算属性20・予算1:n情報入力が未対応

### 1-3. 棚卸管理（画面）
- 現状: 棚卸回・差異一覧の表示は実装済み
- 部分実装点:
  - 差異登録/是正更新の入力UI未実装

### 1-4. 廃棄承認（画面）
- 現状: 承認待ち一覧表示は実装済み
- 部分実装点:
  - 承認/差戻し操作、証跡入力UIが未実装

### 1-5. 監査ログ（画面）
- 現状: 一覧表示は実装済み
- 部分実装点:
  - フィルタ検索UI（対象/操作/実行者/期間）が未実装

### 1-6. ダッシュボード
- 現状: 未紐付け件数・廃棄承認待ち件数・棚卸差異未完了件数を表示
- 部分実装点:
  - 予算消化率表示が未実装
  - 保守期限アラート表示が未実装

## 2. 部分実装の画面
- `templates/account_requests/asset_detail.html`
  - 詳細表示のみで編集フォームがない
- `templates/account_requests/budget_list.html`
  - 予算3階層分類・属性20・1:nの入力欄がない
- `templates/account_requests/inventory_list.html`
  - 差異登録/更新フォームがない
- `templates/account_requests/disposal_approval.html`
  - 承認/差戻しフォームがない
- `templates/account_requests/audit_logs.html`
  - 絞り込みフォームがない
- `templates/account_requests/dashboard.html`
  - 予算消化率/保守期限アラートの表示がない

## 3. 部分実装の項目

### 3-1. 資産編集関連項目
- AS-A-001〜AS-A-020（属性20）: 更新処理が未対応
- AS-A-017/AS-A-018（1:n属性）: 更新処理が未対応

### 3-2. 画面項目定義とのギャップ
- SCR-001: DS-001, DS-003 が未表示
- SCR-010: AS-S-002〜AS-S-006 の検索UIが未実装
- SCR-030: BG-002A/B/C, BG-A-01〜07, BG-M-001〜003 が未実装
- SCR-060: IV-003〜IV-005 の入力UIが未実装
- SCR-070: DP-004〜DP-006 の入力UIが未実装
- SCR-080: AL-001〜AL-005 の入力UIが未実装

## 4. 対応優先度（提案）
1. 資産編集の Service 化 + 属性20/1:n更新対応
2. 廃棄承認/棚卸の操作UI実装（業務停止リスク低減）
3. 予算画面の3階層/属性20/1:n対応
4. 監査ログ検索UIとダッシュボード不足指標の追加
