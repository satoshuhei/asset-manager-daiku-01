# 月次監査結果（2026-02）

対象規約: `.github/governance-periodic-checks.md`

## 1. 監査ヘッダ
- 実施年月: 2026-02
- 実施日: 2026-02-18
- 実施者: TBD
- レビューア: TBD
- 対象ブランチ/コミット: TBD

## 2. 実行コマンド（実績）

### 2.1 差分優先
`python manage.py test apps.account_requests.tests.PerformanceGovernanceTests --parallel 4 --durations 5`

実行結果:
- 3 tests, OK, 8.257s

### 2.2 全体回帰（PR前・マージ前）
`python manage.py test --parallel 4 --durations 10`

実行結果:
- 17 tests, OK, 20.891s

## 3. 一覧系性能監査（クエリ予算）

### 3.1 測定条件（固定）
- データ件数: Asset 60件
- 画面ページサイズ: 資産一覧50件、監査ログ一覧100件（View固定値）
- フィルタ条件: `asset_code=AS-PERF-`（資産一覧Web/API）

### 3.2 予算値
| 対象 | クエリ予算 | 実測クエリ数 | 判定 |
|---|---:|---:|---|
| 資産一覧（Web） | 12 | 12以下（テスト検証済） | OK |
| 資産一覧（API） | 8 | 8以下（テスト検証済） | OK |
| 監査ログ一覧（Web） | 10 | 10以下（テスト検証済） | OK |

### 3.3 実行時間（遅延上位）
| 順位 | テスト名 | 実行時間(s) | 前回比 | 判定 |
|---:|---|---:|---:|---|
| 1 | test_login_lockout_after_five_failures | 8.068 | N/A（初回） | 監視継続 |
| 2 | test_query_budget_asset_list_api | 4.225 | N/A（初回） | 監視継続 |
| 3 | test_asset_list_access_after_login | 4.120 | N/A（初回） | 監視継続 |

## 4. テスト実行パフォーマンス運用チェック
- [x] 並列実行（`--parallel 4`）で実行した
- [x] 遅延調査で `--durations` を併用した
- [x] 差分優先実行 → 全体回帰の順で実施した
- [x] 重いテスト追加時の軽量化案（分割/共通化/Service単体化）を提示した

## 5. 規約例外管理チェック

### 5.1 今回の例外判定
- 新規例外: なし

### 5.2 例外登録テンプレート（必要時のみ）
- 今回は該当なし。

## 6. 互換コード棚卸しチェック
- [x] 互換コード新規追加の有無を確認した
- [x] 理由・期限・削除タスクの有無を確認した
- [x] 四半期棚卸し結果を `ai/todo.md` に記録する運用を確認した

棚卸し結果メモ:
- 対象: 期限付き互換コード
- 判定: 新規追加なし
- 対応: 継続監視（次回四半期点検）

## 7. 定期レビュー頻度チェック
- [x] 週次（10分）軽量確認を実施
- [x] 月次（30〜60分）本監査を実施
- [x] リリース前重点監査の要否を判定（要）

## 8. 是正結果サマリ
- 主要結果: 監査規約5項目に対する運用・記録を整備済み
- 退行有無: なし（17/17 tests OK）
- 是正内容: テンプレート運用を追加し月次記録の再現性を確保
- 次月アクション: 実測時間の前月比較を実施し、閾値超過時に軽量化案を提案

## 9. 記録先更新チェック
- [x] `docs` 監査結果文書を更新した
- [x] `ai/decision_log.md` を更新した
- [x] `ai/todo.md` を更新した

## 10. 参照
- 日次実施記録: `docs/18_定期監査結果_2026-02-18.md`
- 実行テンプレート: `docs/19_月次監査実行テンプレート.md`
