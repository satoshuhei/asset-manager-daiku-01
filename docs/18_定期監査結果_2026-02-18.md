# 定期監査結果（2026-02-18）

対象規約: `.github/governance-periodic-checks.md`

## 1. 一覧系性能の測定基準

### 対応内容
- `apps/account_requests/tests.py` に `PerformanceGovernanceTests` を追加。
- 一覧系のクエリ予算と測定条件をテスト内に固定。

### テスト条件（固定）
- データ件数: Asset 60件
- 画面ページサイズ: 資産一覧50件、監査ログ一覧100件（View固定値）
- フィルタ条件: `asset_code=AS-PERF-`（資産一覧Web/API）

### クエリ予算
- 資産一覧（Web）: 12件以内
- 資産一覧（API）: 8件以内
- 監査ログ一覧（Web）: 10件以内

### 実測（差分優先）
- 実行コマンド:
  - `python manage.py test apps.account_requests.tests.PerformanceGovernanceTests --parallel 4 --durations 5`
- 実行結果:
  - 3 tests, OK, 8.257s
  - slowest:
    - `test_query_budget_audit_log_list_web`: 2.795s
    - `test_query_budget_asset_list_web`: 2.778s
    - `test_query_budget_asset_list_api`: 2.683s

### 実測（全体回帰）
- 実行コマンド:
  - `python manage.py test --parallel 4 --durations 10`
- 実行結果:
  - 17 tests, OK, 20.891s
  - 上位遅延テスト（抜粋）:
    - `test_login_lockout_after_five_failures`: 8.068s
    - `test_query_budget_asset_list_api`: 4.225s
    - `test_asset_list_access_after_login`: 4.120s

## 2. テスト実行パフォーマンス運用

### 対応内容
- `docs/11_運用手順書_Runbook.md` に以下を反映:
  - 並列実行標準（`--parallel 4`）
  - 反復開発時の差分優先テスト
  - `--durations` で遅延調査する手順
  - 重いテスト追加時の軽量化案提示ルール

## 3. 規約例外の詳細管理

### 判定
- 今回の監査では規約例外申請はなし（新規例外 0件）。

### 運用確認
- 例外が必要な場合の記録項目（理由・影響・期限・オーナー・失効日・todo連携）をRunbookへ明記。

## 4. 互換コードの棚卸し

### 判定
- 期限付き互換コードの新規追加なし。
- 互換維持を目的とした実装追加なし。

### 対応
- 四半期棚卸しで `ai/todo.md` に記録する運用をRunbookへ明記。

## 5. 定期レビュー頻度

### 対応
- 週次・月次・リリース前の監査頻度をRunbookへ明記。

## 6. 是正結果サマリ
- 監査規約5項目に対し、テスト・実測・運用手順・記録先を整備した。
- 現時点の回帰テストは全件成功（17/17）。
- 次回月次監査では、本書へ差分追記しベースライン推移を比較する。

## 7. 次回実行テンプレート
- 次回以降の監査実行は `docs/19_月次監査実行テンプレート.md` を利用する。
- 月次集約版の初回ファイルは `docs/20_月次監査結果_2026-02.md` を参照する。
