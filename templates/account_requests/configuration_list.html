{% extends "account_requests/base.html" %}
{% block title %}構成ビュー{% endblock %}
{% block content %}
<h1 class="h3 mb-3">構成ビュー</h1>
{% if error_message %}<div class="alert alert-danger py-2">{{ error_message }}</div>{% endif %}

<div class="card shadow-sm border-0 mb-4">
    <div class="card-header bg-white"><strong>構成登録</strong></div>
    <div class="card-body">
        <form method="post" class="row g-3">
            {% csrf_token %}
            <div class="col-md-3"><label class="form-label">構成コード</label><input class="form-control" type="text" name="config_code" required></div>
            <div class="col-md-3"><label class="form-label">構成名</label><input class="form-control" type="text" name="config_name" required></div>
            <div class="col-md-2"><label class="form-label">状態</label><input class="form-control" type="text" name="status" value="ACTIVE"></div>
            <div class="col-md-4">
                <label class="form-label">資産</label>
                <select class="form-select" name="asset_id">
                    <option value="">--未選択--</option>
                    {% for asset in assets %}
                    <option value="{{ asset.id }}">{{ asset.asset_code }} / {{ asset.asset_name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-md-2"><label class="form-label">ロール種別</label><input class="form-control" type="text" name="role_type" value="MAIN"></div>
            <div class="col-md-2"><label class="form-label">数量</label><input class="form-control" type="number" name="quantity" value="1" min="1"></div>
            <div class="col-12 text-end"><button class="btn btn-primary" type="submit">登録</button></div>
        </form>
    </div>
</div>

<div class="card shadow-sm border-0">
    <div class="card-header bg-white"><strong>構成一覧</strong></div>
    <div class="table-responsive">
        <table class="table table-striped table-hover mb-0 align-middle">
            <thead class="table-light"><tr><th>ID</th><th>構成コード</th><th>構成名</th><th>状態</th><th>更新日時</th></tr></thead>
            <tbody>
                {% for conf in configurations %}
                <tr>
                    <td>{{ conf.id }}</td>
                    <td>{{ conf.config_code }}</td>
                    <td>{{ conf.config_name }}</td>
                    <td>{{ conf.status }}</td>
                    <td>{{ conf.updated_at }}</td>
                </tr>
                {% empty %}
                <tr><td colspan="5" class="text-center text-muted py-4">データがありません</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
